// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource mysql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "mysql"
}

generator client {
  provider = "prisma-client-js"
}

model SystemUser {
  id        Int       @id @default(autoincrement())
  name      String    @default("")
  email     String    @unique @default("")
  password  String
  role      String
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt
}

model Photo {
  id                    Int          @id @default(autoincrement())
  name                  String       @default("")
  imageFile_id          String?
  imageFile_filesize    Int?
  imageFile_width       Int?
  imageFile_height      Int?
  imageFile_extension   String?
  createdAt             DateTime?    @default(now())
  updatedAt             DateTime?    @updatedAt
  from_Legislator_image Legislator[] @relation("Legislator_image")
  from_Party_image      Party[]      @relation("Party_image")

  @@index([name])
}

model Legislator {
  id                                    Int                     @id @default(autoincrement())
  name                                  String                  @default("")
  slug                                  String                  @unique @default("")
  image                                 Photo?                  @relation("Legislator_image", fields: [imageId], references: [id])
  imageId                               Int?                    @map("image")
  imageLink                             String                  @default("")
  createdAt                             DateTime?               @default(now())
  updatedAt                             DateTime?               @updatedAt
  from_LegislativeYuanMember_legislator LegislativeYuanMember[] @relation("LegislativeYuanMember_legislator")

  @@index([imageId])
}

model LegislativeYuanMember {
  id                   Int                 @id @default(autoincrement())
  legislator           Legislator?         @relation("LegislativeYuanMember_legislator", fields: [legislatorId], references: [id])
  legislatorId         Int?                @map("legislator")
  party                Party?              @relation("LegislativeYuanMember_party", fields: [partyId], references: [id])
  partyId              Int?                @map("party")
  legislativeMeeting   LegislativeMeeting? @relation("LegislativeYuanMember_legislativeMeeting", fields: [legislativeMeetingId], references: [id])
  legislativeMeetingId Int?                @map("legislativeMeeting")
  type                 String
  constituency         String?
  city                 String?
  tooltip              String              @default("")
  note                 String              @default("")
  createdAt            DateTime?           @default(now())
  updatedAt            DateTime?           @updatedAt

  @@index([legislatorId])
  @@index([partyId])
  @@index([legislativeMeetingId])
}

model Party {
  id                               Int                     @id @default(autoincrement())
  name                             String                  @default("")
  slug                             String                  @unique @default("")
  image                            Photo?                  @relation("Party_image", fields: [imageId], references: [id])
  imageId                          Int?                    @map("image")
  imageLink                        String                  @default("")
  createdAt                        DateTime?               @default(now())
  updatedAt                        DateTime?               @updatedAt
  from_LegislativeYuanMember_party LegislativeYuanMember[] @relation("LegislativeYuanMember_party")

  @@index([imageId])
}

model LegislativeMeeting {
  id                                                Int                         @id @default(autoincrement())
  term                                              Int                         @unique
  startTime                                         DateTime                    @mysql.Date
  endTime                                           DateTime                    @mysql.Date
  createdAt                                         DateTime?                   @default(now())
  updatedAt                                         DateTime?                   @updatedAt
  from_LegislativeYuanMember_legislativeMeeting     LegislativeYuanMember[]     @relation("LegislativeYuanMember_legislativeMeeting")
  from_LegislativeMeetingSession_legislativeMeeting LegislativeMeetingSession[] @relation("LegislativeMeetingSession_legislativeMeeting")
}

model LegislativeMeetingSession {
  id                   Int                 @id @default(autoincrement())
  legislativeMeeting   LegislativeMeeting? @relation("LegislativeMeetingSession_legislativeMeeting", fields: [legislativeMeetingId], references: [id])
  legislativeMeetingId Int?                @map("legislativeMeeting")
  term                 Int
  startTime            DateTime            @mysql.Date
  endTime              DateTime            @mysql.Date
  createdAt            DateTime?           @default(now())
  updatedAt            DateTime?           @updatedAt

  @@index([legislativeMeetingId])
}
